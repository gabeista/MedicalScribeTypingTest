<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .typing-test-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .passage {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #fff;
            border-radius: 5px;
        }
        .user-input {
            width: 100%;
            height: 150px;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            resize: vertical;
        }
        .results {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="typing-test-container">
    <h3>Typing Test</h3>
    <p>Type the following passage accurately in the box below and click "Finish Test" to see your results:</p>
    <div class="passage" id="text-to-type">
        Patient is a 52-year-old male presenting with intermittent chest pain over the last two days. The pain is described as sharp, localized to the left side of the chest, and occasionally radiates to the left shoulder. He denies shortness of breath, dizziness, and sweating. No previous history of cardiac issues. Vital signs are stable, and physical examination reveals no abnormalities.
    </div>

    <textarea id="user-input" class="user-input" placeholder="Type the passage here..." onfocus="startTimer()" spellcheck="false" autocorrect="off" autocapitalize="off"></textarea>
    <br>
    <button onclick="endTest()">Finish Test</button>

    <div id="result" class="results"></div>
</div>

<script>
    let startTime;

    // Start timer when the user starts typing
    function startTimer() {
        if (!startTime) {
            startTime = new Date().getTime();
        }
    }

    // Prevent copying and pasting
    document.getElementById("user-input").addEventListener("copy", function(e) {
        e.preventDefault();
        alert("Copying is disabled for this test.");
    });
    document.getElementById("user-input").addEventListener("paste", function(e) {
        e.preventDefault();
        alert("Pasting is disabled for this test.");
    });

    // Function to calculate typing speed and accuracy
    function endTest() {
        const textToType = document.getElementById("text-to-type").innerText.trim().toLowerCase();
        const userInput = document.getElementById("user-input").value.trim().toLowerCase();
        const endTime = new Date().getTime();
        const timeTaken = (endTime - startTime) / 1000; // time in seconds

        // Calculate Words Per Minute (WPM)
        const wordsTyped = userInput.trim().split(/\s+/).length;
        const wordsPerMinute = (wordsTyped / timeTaken) * 60;

        // Calculate accuracy
        let correctChars = 0;
        const length = Math.min(userInput.length, textToType.length);
        for (let i = 0; i < length; i++) {
            if (userInput[i] === textToType[i]) correctChars++;
        }
        const accuracy = (correctChars / textToType.length) * 100;

        // Display results
        document.getElementById("result").innerHTML = `
            <strong>Results:</strong><br>
            Time Taken: ${timeTaken.toFixed(2)} seconds<br>
            Words Per Minute (WPM): ${wordsPerMinute.toFixed(2)}<br>
            Accuracy: ${accuracy.toFixed(2)}%<br>
            <strong>Feedback:</strong><br>
            Aim for at least 95% accuracy to ensure accurate documentation.
        `;
    }
</script>

</body>
</html>
